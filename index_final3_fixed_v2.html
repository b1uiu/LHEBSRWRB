<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>لهيب ستور — انتظار الإطلاق</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#0b0b0b;--muted:#bfbfbf;--white:#fff;--panel:rgba(255,255,255,0.03);--btn-bg:rgba(255,255,255,0.02);--btn-border:rgba(255,255,255,0.04)}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;width:100%;overflow:hidden}
body{
  font-family:"Cairo",sans-serif;
  background-image:url('background.jpg');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  background-color:var(--bg);
  color:var(--white);
}
body::before{content:"";position:fixed;inset:0;background:rgba(0,0,0,0.45);pointer-events:none;z-index:0}
.header{position:fixed;top:12px;right:12px;left:12px;display:flex;align-items:center;justify-content:flex-end;z-index:120;gap:12px}
.brand-wrap{display:flex;align-items:center;gap:12px}
/* Logo box */
.logo-box{width:64px;height:64px;border-radius:12px;overflow:hidden;background:#0e0e0e;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;z-index:130;flex:0 0 64px}
.logo-box img{width:100%;height:100%;object-fit:cover;display:block}

/* Brand text (two lines) */
.brand-text{display:flex;flex-direction:column;align-items:flex-end;line-height:1}
.brand-text .line1{font-weight:800;font-size:18px;color:var(--white);letter-spacing:0.4px}
.brand-text .line2{font-weight:600;font-size:13px;color:var(--muted);margin-top:2px}

/* page layout */
.top-card-wrap{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;padding:18px;z-index:10;position:relative}
.top-card{width:100%;max-width:820px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;padding:34px 28px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(0,0,0,0.6);text-align:center;z-index:140}
.top-card h1{font-size:28px;margin-bottom:12px;font-weight:800;color:var(--white)}
.top-card .lead{font-size:20px;font-weight:800;color:var(--white);margin-bottom:10px}
.top-card p{color:var(--muted);line-height:1.6;margin-bottom:18px}
.badge{display:inline-block;padding:10px 18px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-weight:700;color:var(--white);margin-bottom:18px}
.card-actions{display:flex;justify-content:center;margin-top:6px}
.btn{padding:12px 20px;border-radius:12px;font-weight:700;cursor:pointer;border:0}
.btn-primary{background:linear-gradient(90deg,#ffffff11,#ffffff33);border:1px solid rgba(255,255,255,0.06);color:var(--white);min-width:300px;padding:14px 24px;font-size:18px}
.socials{position:fixed;bottom:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:150}
.socials a{width:48px;height:48px;border-radius:50%;display:grid;place-items:center;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);text-decoration:none;color:inherit}
.footer-fixed{position:fixed;bottom:26px;left:16px;color:var(--muted);font-size:13px;opacity:0.8;z-index:150}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1000}
.modal .box{background:#0b0b0b;padding:18px;border-radius:12px;width:92%;max-width:520px;border:1px solid rgba(255,255,255,0.04);color:var(--white);text-align:right}
.modal .close-btn{ /* changed to match tab-style */
  background:var(--btn-bg);
  border:1px solid var(--btn-border);
  padding:8px 12px;
  border-radius:8px;
  color:var(--white);
  cursor:pointer;
  font-weight:700;
  min-width:70px;
  text-align:center;
}
.modal .close-btn:hover{transform:translateY(-1px)}
.modal .btn-save{ /* save button styled like tab buttons too but filled */
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.06);
  padding:8px 12px;
  border-radius:8px;
  color:var(--white);
  cursor:pointer;
  font-weight:700;
  min-width:70px;
}
.modal.show{display:flex}
.tab-switch{display:flex;gap:8px;margin-bottom:12px;justify-content:flex-end}
.tab-switch button{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--btn-bg);color:var(--white);cursor:pointer}
.tab-switch button.active{background:rgba(255,255,255,0.04)}
.input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--white);margin-top:6px}
@media (max-width:520px){ .top-card h1{font-size:22px} .top-card{padding:18px} .btn-primary{min-width:220px;font-size:16px} .socials{right:12px} }
</style>

</head>
<body>
<header class="header" role="banner">
  <div class="brand-wrap" aria-hidden="false">
    <!-- Two-line brand text (to the left of the logo visually in RTL layout) -->
    <div class="brand-text" aria-label="اسم المتجر">
      <span class="line1">Lheb</span>
      <span class="line2">Store</span>
    </div>

    <!-- Logo box -->
    <div class="logo-box" aria-hidden="false">
      <img src="logo.JPG" alt="شعار لهيب ستور">
    </div>
  </div>
</header>

<section class="top-card-wrap">
  <div class="top-card" role="region" aria-labelledby="promoTitle">
    <h1 id="promoTitle">انتظروا موقعنا قريباً ..</h1>
    <p>لهيب ستور , متجر إلكتروني بتجربة بسيطة، آمنة وتلبي احتياجاتك. نجهّز كل شيء لتقديم الأفضل.</p>
    <div class="badge">خيارك الأمثل ، لأن الجودة تهمك</div>
    <div class="card-actions"><button class="btn btn-primary" id="mainRegister" type="button">تسجيل</button></div>
  </div>
</section>

<div id="modalRegister" class="modal" role="dialog" aria-modal="true" aria-labelledby="regTitle" aria-hidden="true">
  <div class="box" role="document">
      <h3 id="regTitle">إنطلاق موقع المتجر</h3>
      <p style="color:var(--muted)">اختر طريقة للتواصل:</p>
      <div class="tab-switch" role="tablist">
          <button id="tabEmail" class="active" role="tab" type="button">البريد الإلكتروني</button>
          <button id="tabPhone" role="tab" type="button">رقم الهاتف</button>
      </div>
      <!-- لوحة البريد -->
      <div id="panelEmail" class="panel" style="display:block;">
          <label>البريد الإلكتروني</label>
          <input id="regEmail" class="input" placeholder="example@example.com" type="email" aria-label="البريد الإلكتروني">
      </div>
      <!-- لوحة الهاتف -->
      <div id="panelPhone" class="panel" style="display:none;">
          <label>رقم الهاتف</label>
          <input id="regPhone" class="input" placeholder="+218..." type="tel" aria-label="رقم الهاتف">
      </div>
      <!-- الأزرار -->
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
          <!-- data-close supports backdrop/close actions -->
          <button class="modal-close modal-close-btn close-btn" data-close="modalRegister" type="button" aria-label="إغلاق النافذة">إغلاق</button>
          <button id="regSave" class="btn-save" type="button">حفظ</button>
      </div>
  </div>
</div>

<div class="socials" aria-hidden="false">
  <a class="insta" href="https://www.instagram.com/lhebstore" target="_blank" aria-label="انستغرام" rel="noopener"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="5" stroke="white" stroke-width="1.2" fill="none"/><circle cx="12" cy="12" r="3.2" stroke="white" stroke-width="1.2" fill="none"/><circle cx="17.5" cy="6.5" r="0.6" fill="white"/></svg></a>

  <a class="wa" href="https://wa.me/218920971318" target="_blank" aria-label="هاتف" rel="noopener">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1-.24 11.36 11.36 0 0 1 3.56.57 1 1 0 0 1 .68.95v3.61a1 1 0 0 1-1 1A17 17 0 0 1 3 5a1 1 0 0 1 1-1h3.61a1 1 0 0 1 1 .68 11.36 11.36 0 0 1 .57 3.56 1 1 0 0 1-.24 1z"/>
    </svg>
  </a>
</div>

<div class="footer-fixed">© جميع الحقوق محفوظة لهيب ستور</div>

<script>
/* ---------- Modal & register JS (improved & fixed) ---------- */
/* Edit apiEndpoint below if needed (server notify URL) */
const apiEndpoint = "https://leheb-store-public.onrender.com/notify";

/* Utility: show/hide modal with accessibility handling */
function showModal(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.add('show');
  el.setAttribute('aria-hidden','false');
  // lock scrolling
  document.documentElement.style.overflow = 'hidden';
  document.body.style.touchAction = 'none';
  // focus first input or button
  const focusable = el.querySelector('input,button,textarea,select,[tabindex]:not([tabindex="-1"])');
  if(focusable) focusable.focus();
}

function hideModal(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.remove('show');
  el.setAttribute('aria-hidden','true');
  // restore scrolling
  document.documentElement.style.overflow = '';
  document.body.style.touchAction = '';
  // return focus to main button
  const mainBtn = document.getElementById('mainRegister');
  if(mainBtn) mainBtn.focus();
}

/* open modal */
const mainBtn = document.getElementById('mainRegister');
if(mainBtn) mainBtn.addEventListener('click', ()=> showModal('modalRegister'));

/* tab switching */
const tabEmail = document.getElementById('tabEmail');
const tabPhone = document.getElementById('tabPhone');
if(tabEmail && tabPhone){
  tabEmail.addEventListener('click', ()=> {
    tabEmail.classList.add('active'); tabPhone.classList.remove('active');
    document.getElementById('panelEmail').style.display='block';
    document.getElementById('panelPhone').style.display='none';
  });
  tabPhone.addEventListener('click', ()=> {
    tabPhone.classList.add('active'); tabEmail.classList.remove('active');
    document.getElementById('panelPhone').style.display='block';
    document.getElementById('panelEmail').style.display='none';
  });
}

/* Robust close handling:
   - Close when clicking elements with data-close (delegated)
   - Close when clicking backdrop (outside .box)
   - Close on Escape
*/
document.addEventListener('click', function(e){
  const closer = e.target.closest('[data-close]');
  if(closer){
    const targetId = closer.getAttribute('data-close') || 'modalRegister';
    hideModal(targetId);
    return;
  }
  // click on backdrop: if clicked element has class modal and is visible
  if(e.target.classList && e.target.classList.contains('modal') && e.target.classList.contains('show')){
    const id = e.target.id || 'modalRegister';
    hideModal(id);
  }
});

document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' || e.key === 'Esc'){
    const m = document.getElementById('modalRegister');
    if(m && m.classList.contains('show')) hideModal('modalRegister');
  }
});

/* handle save / submit */
const regSaveBtn = document.getElementById('regSave');
if(regSaveBtn){
  regSaveBtn.addEventListener('click', async ()=>{
    const emailVisible = document.getElementById('panelEmail').style.display !== 'none';
    if(emailVisible){
      const email = document.getElementById('regEmail').value.trim();
      if(!email){ alert('الرجاء إدخال بريد إلكتروني صالح'); return; }
      const payload = { type:'email', value: email, timestamp: new Date().toISOString() };
      try{
        const res = await fetch(apiEndpoint, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
        if(!res.ok) throw new Error('server error');
        alert('تم التسجيل، سيتم إعلامنا فورًا.');
      }catch(err){
        const subs = JSON.parse(localStorage.getItem('lheb_subs')||'[]');
        subs.push({email:email,date:new Date().toISOString()});
        localStorage.setItem('lheb_subs', JSON.stringify(subs));
        alert('حفظنا بريدك محليًا (سيترسل عندما تشغّل السيرفر).');
      }
      document.getElementById('regEmail').value='';
      hideModal('modalRegister');
    } else {
      const phone = document.getElementById('regPhone').value.trim();
      if(!phone){ alert('الرجاء إدخال رقم هاتف'); return; }
      const payload = { type:'phone', value: phone, timestamp: new Date().toISOString() };
      try{
        const res = await fetch(apiEndpoint, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
        if(!res.ok) throw new Error('server error');
        alert('تم التسجيل، سيتم إعلامنا فورًا.');
      }catch(err){
        const phones = JSON.parse(localStorage.getItem('lheb_phones')||'[]');
        phones.push({phone:phone,date:new Date().toISOString()});
        localStorage.setItem('lheb_phones', JSON.stringify(phones));
        alert('حفظنا رقمك محليًا (سيترسل عندما تشغّل السيرفر).');
      }
      document.getElementById('regPhone').value='';
      hideModal('modalRegister');
    }
  });
}
</script>

</body>
</html>
